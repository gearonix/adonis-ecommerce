(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8572,4925],{4925:function(e,s,a){"use strict";a.r(s),a.d(s,{DefaultChat:function(){return p}});var t=a(97458),r=a(52983),l=a(4339),n=a.n(l),c=a(94387),o=a(83845),_=a(73670),i=a(6031),d=a.n(i),m=a(51922),u=a(83021),f=a(57287),h=a(98362);let g=(0,r.memo)(e=>{let{messages:s,userId:a}=e,r=(0,o.J)(s);return(0,t.jsxs)("div",{className:n().messages_block,children:[(0,t.jsxs)("div",{className:n().messages_wrapper,onScroll:r.onScroll,ref:r.containerRef,children:[(0,t.jsx)(c.rf,{}),s.map(e=>(0,t.jsx)(c.v0,{message:e,isMine:e.senderId===a},e.messageId)),(0,t.jsx)("div",{ref:r.bottomRef})]}),(0,t.jsx)("div",{className:n().bottomWrapper,children:(0,t.jsx)(_.sS,{when:r.scrollBottomSize>100,children:(0,t.jsx)(c.aK,{onClick:r.scrollToBottom})})})]})}),p=()=>{let e=(0,u.KS)(300),{t:s}=(0,h.$G)();return(0,t.jsx)(_.sS,{when:e,children:(0,t.jsxs)(_.xM,{className:n().default_container,children:[(0,t.jsx)("div",{className:n().default_chat_image,children:(0,t.jsx)(f.avz,{})}),(0,t.jsxs)("h2",{className:n().default_title,children:[s("Choose a chat or create a"),(0,t.jsx)(d(),{href:m._.USERS,children:(0,t.jsxs)("span",{children:[" ",s("new one")]})})]})]})})};s.default=g},14769:function(e,s,a){"use strict";a.d(s,{A:function(){return c},c:function(){return o}});var t=a(98429),r=a(77808),l=a(28820),n=a(32925);let c=(0,t.L3)("messenger/GET_ROOMS",async(e,s)=>{let{dispatch:a,extra:t,getState:c,rejectWithValue:o}=s,_=n.ce.userId(c()),i=await t.api.messenger.getRooms(_);if((0,r.VZ)(i))return o("An error occurred.");a(l._I.setRooms(i.data))}),o=(0,t.L3)("messenger/SELECT_ROOM",async(e,s)=>{let{dispatch:a,extra:t,getState:c}=s,o=n.ce.userId(c()),_=await t.api.messenger.selectRoom(e,o);(0,r.VZ)(_)||a(l._I.setMessages(_.data))})},28572:function(e,s,a){"use strict";a.r(s);var t=a(97458),r=a(52983),l=a(8613),n=a.n(l),c=a(76066),o=a(83021),_=a(98429),i=a(14769),d=a(73670),m=a(90145),u=a(28820),f=a(34060),h=a(32925),g=a(4925);let p=(0,r.memo)(()=>{let e=(0,_.I0)(),s=(0,_.v9)(u._5.messages),a=(0,_.v9)(u._5.selectedId),l=(0,_.v9)(h.ce.userId),{actions:p,subscribes:x}=(0,f._)();return(0,r.useEffect)(()=>{x.onAddMessage(s=>{e(u._I.addMessage(s)),p.makeMessagesRead(s)}),x.onMessagesRead(()=>{e(u._I.makeMessagesRead())})},[]),(0,o.El)(()=>{e(u._I.clearRoom()),p.subscribeToRoom(a),e((0,i.c)(a))},[a]),(0,t.jsx)("div",{className:n().messages_main,children:(0,t.jsxs)("div",{className:n().wrapper,children:[(0,t.jsxs)(d.sS,{when:a,children:[(0,t.jsx)(c.cF,{messages:s,userId:l}),(0,t.jsx)(m.Z,{})]}),(0,t.jsx)(d.sS,{when:!a,children:(0,t.jsx)(g.DefaultChat,{})})]})})});s.default=p},4339:function(e){e.exports={messages_block:"style_messages_block__gDwSV",messages_wrapper:"style_messages_wrapper__Bo_dp",scrollToBottom:"style_scrollToBottom__n1Lxx",default_container:"style_default_container__gMYZ_",bottomWrapper:"style_bottomWrapper__ClUl1",default_chat_image:"style_default_chat_image__W7LEu",default_title:"style_default_title__pTFnf"}},8613:function(e){e.exports={messages_main:"style_messages_main__UiS2u",wrapper:"style_wrapper__DSPKV"}}}]);